var debug=!0,log=function(o){debug&&console.log(o)};
var map,gmap=function(o){"use strict";function a(){log("gmap.init() loaded"),e.mapcanvas=o(".js-gmap"),e.mapcanvas.length?n():log("gmap.init(): no mapcanvas found")}function n(){log("gmap.load() success");var o=document.createElement("script");o.type="text/javascript",o.id="new-gmap",o.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAF1sRGF7ku7L3dKictevzxUTPWc2YF6NI&callback=gmap.build",document.body.appendChild(o)}function t(){log("gmap.build() success");var a=o.extend({},e.mapDefaults,{zoom:e.zoom,center:new google.maps.LatLng(e.latCenter,e.lonCenter),zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},maxZoom:e.maxZoom,minZoom:e.minZoom,styles:[]});map=new google.maps.Map(e.mapcanvas[0],a)}var e={mapDefaults:{panControl:!1,zoomControl:!0,zoomControlOptions:!0,scaleControl:!1,mapTypeControl:!1,streetViewControl:!1,scrollwheel:!1,zoom:4,maxZoom:16,minZoom:3},mapcanvas:0,latCenter:37.09024,lonCenter:-96.712891};return{init:a,build:t}}(jQuery);
var getData=function(e){"use strict";function t(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n}function n(e){return e.match("<title>(.*)?</title>")[1]}function r(){e.support.cors=!0;var r="./state_codes.csv",o=t("GET",r);if(!o)return void alert("CORS not supported");o.onload=function(){var e=o.responseText,t=n(e);alert("Response from CORS request to "+r+": "+t)},o.onerror=function(){alert("Woops, there was an error making the request.")},o.send()}function o(e){}function a(){log("get state data"),r()}return{state:a,area:o}}(jQuery);
!function(a){"use strict";var t={};log("app loaded"),gmap.init(),t=function(){if(log("initialize markers"),a.isEmptyObject(t)){var r=getData.state();for(var i in r)displayUSData(i);return r}log("error, data is not refreshed")}()}(jQuery);